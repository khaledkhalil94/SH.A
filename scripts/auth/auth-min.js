$(function(){var e=$(".login-form");e.form({fields:{username:{identifier:"username",rules:[{type:"empty",prompt:"Username can't be empty."}]},password:{identifier:"password",rules:[{type:"empty",prompt:"Password can't be empty."}]}},onSuccess:function(a){a.stopPropagation(),a.preventDefault(),e.parents(".form.login").addClass("loading"),$username=e.form("get value","username"),$password=e.form("get value","password"),$values=e.form("get values"),$.ajax({url:"ajax/_auth.php",type:"post",dataType:"json",data:{action:"login",values:$values},success:function(a,o){if("1"==a)e.parents(".form.login").removeClass("loading"),$(".ui.message").remove(),$("#login-hr").remove(),e.parents(".form.login").load("ajax/inc/login-success.php",$username,function(e,a,o){"error"==a&&(console.log(a),console.log(o))}),e.remove(),window.setTimeout(function(){window.location="/sha"},2e3);else{var r=a;console.log(r),e.parents(".form.login").removeClass("loading"),$(".ui.message").addClass("negative"),$(".ui.message .header").text(r)}},error:function(a,o,r){e.parents(".form.sign-up").removeClass("loading"),console.log(a),console.log("Details: "+o+"\nError:"+r)}})}})}),$(function(){var e,a,o,r=$(".signup-form");r.form({fields:{username:{identifier:"username",rules:[{type:"empty",prompt:"Username can't be empty."},{type:"minLength[4]",prompt:"Username must be between 4 and 15 characters."},{type:"maxLength[15]",prompt:"Username must be between 4 and 15 characters."},{type:"regExp[/^[a-zA-Z0-9_]{4,15}$/]",prompt:"Username may only contain alphanumeric characters or '_'"}]},password:{identifier:"password",rules:[{type:"minLength[4]",prompt:"Password must be at least 4 characters long."}]},repassword:{identifier:"repassword",rules:[{type:"match[password]",prompt:"Passwords don't match."}]},email:{identifier:"email",rules:[{type:"empty",prompt:"Email can't be empty."},{type:"email",prompt:"E-mail is not valid."}]}},inline:!0,duration:400,delay:400,on:"blur",keyboardShortcuts:!1,reValidate:!1,onValid:function(){if("username"==this[0].name||"email"==this[0].name){$name=this[0].name,$value=this[0].value,$loader='<div id="loader" class="ui active tiny inline loader"></div>',$pos='<i style="margin-top: 11px;" class="check circle large green icon"></i>',o='<i style="margin-top: 11px;" class="remove circle large red icon"></i>';var n=$(this);$("."+$name+"-status").children().remove(),0==$("."+$name+"-status").find($(".loader")).length&&n.parents(".field").next().append($loader),$.ajax({url:"ajax/_auth.php",type:"post",dataType:"json",data:{action:"form_check",name:$name,value:$value},success:function(s,t){return"true"!=s.status?(n.parents(".field").next().children().replaceWith(o),r.form("add prompt",s.field,s.field+" is already taken."),"username"==s.field&&(e=!1),"email"==s.field&&(a=!1),!1):(n.parents(".field").next().children().replaceWith($pos),"username"==s.field&&(e=!0),"email"==s.field&&(a=!0),void 0)},error:function(e,a,r){console.log(e),console.log("Details: "+a+"\nError:"+r),n.parents(".field").next().children().replaceWith(o)}})}},onInvalid:function(){$name=this[0].name,$("."+$name+"-status").children().remove()},onSuccess:function(o){return o.stopPropagation(),o.preventDefault(),r.find(".error").removeClass("error").find(".prompt").remove(),e!==!1&&a!==!1?($values=r.form("get values"),r.parents(".form.sign-up").addClass("loading"),void $.ajax({url:"ajax/_auth.php",type:"post",dataType:"json",data:{action:"signup",values:$values},success:function(e,a){if(e.data)e=e.data,r.parents(".form.sign-up").removeClass("loading"),$(".ui.compact.warning.message").remove(),$("#signup-hr").remove(),r.parents(".form.sign-up").load("ajax/inc/signup-success.php",e.id,function(e,a,o){"error"==a&&(console.log(a),console.log(o))}),r.remove(),console.log("registered"),window.setTimeout(function(){window.location="/sha/"},4e3);else if(e.errors){var o=e.errors;return console.log(o),r.parents(".form.sign-up").removeClass("loading"),void $.each(o,function(e,a){$("."+e+"-status").children().remove(),console.log(a),r.form("add prompt",e,a)})}},error:function(e,a,o){r.parents(".form.sign-up").removeClass("loading"),console.log(e),console.log("Details: "+a+"\nError:"+o)}})):!1}})});