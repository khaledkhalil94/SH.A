$(function(){$(".blog-post").on("click","#votebtn",function(t){t.preventDefault(),_this=$(this),$postID=$(".blog-post").attr("id"),$("#votebtn").addClass("loading"),_this.hasClass("voted")?$.ajax({url:"/controllers/_question.php",type:"post",dataType:"json",data:{action:"downvote",id:$postID},success:function(t,o){if("success"==o){$("#votescount").removeClass("red"),$(_this).removeClass("red voted loading"),$(_this).addClass("grey"),$("#votescount").addClass("grey"),$("#votebtn").find("span").text("Like");var e=parseInt($("#votescount").text())-1;$("#votescount").text(e)}},error:function(t,o,e){console.log(t),console.log("Details: "+o+"\nError:"+e)}}):$.ajax({url:"/controllers/_question.php",type:"post",dataType:"json",data:{action:"upvote",id:$postID},success:function(t,o){if(1==t.status){$(_this).removeClass("loading grey"),$(_this).addClass("red voted"),$("#votescount").removeClass("grey"),$("#votescount").addClass("red"),$("#votebtn").find("span").text("unLike");var e=parseInt($("#votescount").text())+1;$("#votescount").text(e)}},error:function(t,o,e){console.log(t),console.log("Details: "+o+"\nError:"+e)}})})}),$(function(){var t=!1;$("#post_save").click(function(o){o.preventDefault(),o.stopPropagation(),$postID=$(".blog-post").attr("id"),$.ajax({url:"/controllers/_question.php",type:"post",dataType:"json",data:{action:"save",id:$postID},success:function(o,e){1==o.status?t?($("#profile_err_msg").remove(),$(".ui.grid.post-header").after(sucMsg("Question has been saved."))):($(".ui.grid.post-header").after(sucMsg("Question has been saved.")),t=!0):t?($("#profile_err_msg").remove(),$(".ui.grid.post-header").after(errMsg(o.err))):($(".ui.grid.post-header").after(errMsg(o.err)),t=!0)},error:function(t,o,e){console.log(t),console.log("Details: "+o+"\nError:"+e)}}),$(".ui.dropdown").dropdown("hide")})}),$(function(){var t;$(".blog-post").on("click","#post-publish",function(o){o.preventDefault(),t=$(this),$(".ui.modal.post.publish").modal("show")}),$("#post-confirmPub").click(function(t){t.stopPropagation(),$postID=$(".blog-post").attr("id"),$(".modal.post.publish .segment").addClass("loading"),$.ajax({url:"/controllers/_question.php",type:"post",dataType:"json",data:{action:"publish",id:$postID},success:function(t,o){if(1==t.status)console.log("published"),$(".modal.post.publish").modal("hide"),window.location.reload(!1);else{var e='\t\t\t\t\t\t\t\t<div class="ui error message">\t\t\t\t\t\t\t\t<i class="close icon" id="post-errmsg-close-icon"></i>\t\t\t\t\t\t\t\t<div class="header">\t\t\t\t\t\t\t\tError!\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<ul class="list">\t\t\t\t\t\t\t\t<h3>'+t.err+"</h3>\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t</div>";$(".modal.post.publish .segment").removeClass("loading").addClass("raised padded"),$("#post-publish").parent().removeClass("active selected"),$(".modal.post.publish .segment").children().remove(),$(".modal.post.publish .segment").append(e),$("#post-errmsg-close-icon").click(function(t){$(".modal.post.publish").modal("hide")})}},error:function(t,o,e){console.log(t),console.log("Details: "+o+"\nError:"+e)}})})}),$(function(){var t;$(".blog-post").on("click","#post-unpublish",function(o){o.preventDefault(),t=$(this),$(".ui.modal.post.unpublish").modal("show")}),$("#post-confirmUnP").click(function(t){t.stopPropagation(),$postID=$(".blog-post").attr("id"),$(".modal.post.unpublish .segment").addClass("loading"),$.ajax({url:"/controllers/_question.php",type:"post",dataType:"json",data:{action:"unPublish",id:$postID},success:function(t,o){if(1==t.status)console.log("unpublishd"),$(".modal.post.unpublish").modal("hide"),window.location.reload(!1);else{var e='\t\t\t\t\t\t\t\t<div class="ui error message">\t\t\t\t\t\t\t\t<i class="close icon" id="post-errmsg-close-icon"></i>\t\t\t\t\t\t\t\t<div class="header">\t\t\t\t\t\t\t\tError!\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<ul class="list">\t\t\t\t\t\t\t\t<h3>'+t.err+"</h3>\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t</div>";$(".modal.post.unpublish .segment").removeClass("loading").addClass("raised padded"),$("#post-unpublish").parent().removeClass("active selected"),$(".modal.post.unpublish .segment").children().remove(),$(".modal.post.unpublish .segment").append(e),$("#post-errmsg-close-icon").click(function(t){$(".modal.post.unpublish").modal("hide")})}},error:function(t,o,e){console.log(t),console.log("Details: "+o+"\nError:"+e)}})})}),$(function(){var t;$(".blog-post").on("click","#post-delete",function(o){o.preventDefault(),t=$(this),$(".ui.modal.post.delete").modal("show")}),$("#post-confirmDel").click(function(t){t.stopPropagation(),$postID=$(".blog-post").attr("id"),$(".modal.post.delete .segment").addClass("loading"),$.ajax({url:"/controllers/_question.php",type:"post",dataType:"json",data:{action:"delete",id:$postID},success:function(t,o){if(1==t.status)window.location.replace("./");else{var e='\t\t\t\t\t\t\t\t<div class="ui error message">\t\t\t\t\t\t\t\t<i class="close icon" id="post-errmsg-close-icon"></i>\t\t\t\t\t\t\t\t<div class="header">\t\t\t\t\t\t\t\tError!\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<ul class="list">\t\t\t\t\t\t\t\t<h3>'+t+"</h3>\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t</div>";$(".modal.post.delete .segment").removeClass("loading").addClass("raised padded"),$("#post-delete").parent().removeClass("active selected"),$(".modal.post.delete .segment").children().remove(),$(".modal.post.delete .segment").append(e),console.log(t),$("#post-errmsg-close-icon").click(function(t){$(".modal.post.delete").modal("hide")})}},error:function(t,o,e){console.log(t),console.log("Details: "+o+"\nError:"+e)}})})}),$(function(){var t,o;$(".blog-post").on("click","#post-edit",function(o){o.stopPropagation(),$postDOM=$(this).closest(".blog-post"),$content=$postDOM.find(".ui.container p").text(),$title=$postDOM.find(".ui.header h3").text();var e='\t\t\t<div class="ui vertical segment title-form form">\t\t\t<div class="field">\t\t\t<textarea style="resize:none;" id="content" rows="1">'+$title+"</textarea><br />\t\t\t</div>\t\t\t</div>",s='\t\t\t<div class="ui vertical segment content-form form">\t\t\t<div class="field">\t\t\t<textarea id="content" rows="8">'+$content+"</textarea><br />\t\t\t</div>\t\t\t</div>",n='\t\t\t<div class="actions">\t\t\t<button class="ui green button" id="post-confirm-save">Save</button>\t\t\t<button class="ui button" id="post-cancel">Cancel</button>\t\t\t</div>';$postOrgTitle=$postDOM.find(".header .blog-post-title").replaceWith(e),t=$postDOM.find(".container p").replaceWith(s),$postOrgActions=$postDOM.find(".actions").replaceWith(n),$(".ui.pointing.dropdown").hide()}),$(".blog-post").on("click","#post-confirm-save",function(e){e.stopPropagation();var s=$postDOM.attr("id");if(o=$postDOM.find(".content-form textarea#content").val(),$newTitle=$postDOM.find(".title-form textarea#content").val(),"undefined"!=typeof o&&""!=o.trim()){if($content==o&&$title==$newTitle)return void $("#post-cancel").click();$content!=o?$postDOM.find(".form.content-form").addClass("loading"):$postDOM.find(".form.content-form").replaceWith(t),$title!=$newTitle?$postDOM.find(".form.title-form").addClass("loading"):$postDOM.find(".form.title-form").replaceWith($postOrgTitle),$("#post-edit").parent().removeClass("active selected"),$(".ui.pointing.dropdown").show(),$.ajax({url:"/controllers/_question.php",type:"post",dataType:"json",data:{action:"edit",title:$newTitle,content:o,id:s},success:function(t,e){if(1==t.status){var s='(edited <span id="post-date-ago">A few seconds ago</span>)';$postDOM.find("#post-date-ago").length>0?$postDOM.find("#post-date-ago").text("A few seconds ago"):$postDOM.find(".time").append(s),$postDOM.find(".form.content-form").replaceWith("<p>"+o+"</p>"),$postDOM.find(".form.title-form").replaceWith("<h3>"+$newTitle+"</h3>"),$postDOM.find(".actions").replaceWith($postOrgActions)}},error:function(t,o,e){console.log(t),console.log("Details: "+o+"\nError:"+e)}})}}),$(".blog-post").on("click","#post-cancel",function(o){return o.stopPropagation(),$postDOM.find(".content-form.form").replaceWith(t),$postDOM.find(".title-form.form").replaceWith($postOrgTitle),$postDOM.find(".actions").replaceWith($postOrgActions),$("#post-edit").parent().removeClass("active selected"),$(".ui.pointing.dropdown").show(),null})}),$(function(){$(".comment-vote-btn.voted i").hover(function(){$(this).toggleClass("empty")})}),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")});