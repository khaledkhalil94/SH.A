$(function(){var e=$(".login-form");e.form({fields:{username:{identifier:"username",rules:[{type:"empty",prompt:"Username can't be empty."}]},password:{identifier:"password",rules:[{type:"empty",prompt:"Password can't be empty."}]}},onSuccess:function(o){o.stopPropagation(),o.preventDefault(),e.parents(".form.login").addClass("loading"),$username=e.form("get value","username"),$password=e.form("get value","password"),$values=e.form("get values"),$.ajax({url:"controllers/_auth.php",type:"post",dataType:"json",data:{action:"login",values:$values},success:function(o,r){if("1"==o)e.parents(".form.login").removeClass("loading"),$(".ui.message").remove(),$("#login-hr").remove(),e.parents(".form.login").load("controllers/inc/login-success.php",$username,function(e,o,r){"error"==o&&(console.log(o),console.log(r))}),e.remove(),window.setTimeout(function(){window.location="/sha"},2e3);else{var a=o;console.log(a),e.parents(".form.login").removeClass("loading"),$(".ui.message").addClass("negative"),$(".ui.message .header").text(a)}},error:function(o,r,a){e.parents(".form.sign-up").removeClass("loading"),console.log(o),console.log("Details: "+r+"\nError:"+a)}})}})}),$(function(){var e,o,r,a=$(".signup-form");a.form({fields:{username:{identifier:"username",rules:[{type:"empty",prompt:"Username can't be empty."},{type:"minLength[4]",prompt:"Username must be between 4 and 15 characters."},{type:"maxLength[15]",prompt:"Username must be between 4 and 15 characters."},{type:"regExp[/^[a-zA-Z0-9_]{4,15}$/]",prompt:"Username may only contain alphanumeric characters or '_'"}]},password:{identifier:"password",rules:[{type:"minLength[4]",prompt:"Password must be at least 4 characters long."}]},repassword:{identifier:"repassword",rules:[{type:"match[password]",prompt:"Passwords don't match."}]},email:{identifier:"email",rules:[{type:"empty",prompt:"Email can't be empty."},{type:"email",prompt:"E-mail is not valid."}]}},inline:!0,duration:400,delay:400,on:"blur",keyboardShortcuts:!1,reValidate:!1,onValid:function(){if("username"==this[0].name||"email"==this[0].name){$name=this[0].name,$value=this[0].value,$loader='<div id="loader" class="ui active tiny inline loader"></div>',$pos='<i style="margin-top: 11px;" class="check circle large green icon"></i>',r='<i style="margin-top: 11px;" class="remove circle large red icon"></i>';var n=$(this);$("."+$name+"-status").children().remove(),0==$("."+$name+"-status").find($(".loader")).length&&n.parents(".field").next().append($loader),$.ajax({url:"controllers/_auth.php",type:"post",dataType:"json",data:{action:"form_check",name:$name,value:$value},success:function(s,t){return"true"!=s.status?(n.parents(".field").next().children().replaceWith(r),a.form("add prompt",s.field,s.field+" is already taken."),"username"==s.field&&(e=!1),"email"==s.field&&(o=!1),!1):(n.parents(".field").next().children().replaceWith($pos),"username"==s.field&&(e=!0),"email"==s.field&&(o=!0),void 0)},error:function(e,o,a){console.log(e),console.log("Details: "+o+"\nError:"+a),n.parents(".field").next().children().replaceWith(r)}})}},onInvalid:function(){$name=this[0].name,$("."+$name+"-status").children().remove()},onSuccess:function(r){return r.stopPropagation(),r.preventDefault(),a.find(".error").removeClass("error").find(".prompt").remove(),e!==!1&&o!==!1&&($values=a.form("get values"),a.parents(".form.sign-up").addClass("loading"),void $.ajax({url:"controllers/_auth.php",type:"post",dataType:"json",data:{action:"signup",values:$values},success:function(e,o){if(e.data)e=e.data,a.parents(".form.sign-up").removeClass("loading"),$(".ui.compact.warning.message").remove(),$("#signup-hr").remove(),a.parents(".form.sign-up").load("controllers/inc/signup-success.php",e.id,function(e,o,r){"error"==o&&(console.log(o),console.log(r))}),a.remove(),console.log("registered"),window.setTimeout(function(){window.location="/sha/"},4e3);else if(e.errors){var r=e.errors;return console.log(r),a.parents(".form.sign-up").removeClass("loading"),void $.each(r,function(e,o){$("."+e+"-status").children().remove(),console.log(o),a.form("add prompt",e,o)})}},error:function(e,o,r){a.parents(".form.sign-up").removeClass("loading"),console.log(e),console.log("Details: "+o+"\nError:"+r)}}))}})});